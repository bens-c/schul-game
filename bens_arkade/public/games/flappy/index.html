<style>
  * { margin: 0; padding: 0; }
  body { width: 100vw; height: 100vh; overflow: hidden; }
  canvas { display: block; }
</style>
<canvas id="c"></canvas>
<script>
let y=200, v=0, score=0;
const c=document.getElementById("c"), ctx=c.getContext("2d");

function resizeCanvas() {
  c.width = window.innerWidth;
  c.height = window.innerHeight;
  y = c.height / 2;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

document.onclick=()=>v=-6;

setInterval(()=>{
  v+=0.5;
  y+=v;
  if(y>c.height){sendScore(); y=c.height/2; score=0;}
  score++;
  ctx.clearRect(0,0,c.width,c.height);
  ctx.fillRect(c.width/2-20,y,40,40);
  ctx.fillText("Score: "+score,10,20);
},20);

function sendScore(){
  fetch("/score",{
    method:"POST",
    headers:{
      'Content-Type':'application/json',
      'Authorization': localStorage.token // nur im Browser
    },
    body: JSON.stringify({game:"flappy", score})
  });
}
</script>
